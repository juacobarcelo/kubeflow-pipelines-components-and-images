name: Split csv file
description: Split CSV file in several files with same number of rows (except the last one)
metadata:
  annotations:
    author: Joaquín Barceló <jbarceló@solver.cl>
    canonical_location: 
inputs:
- name: archivo-entrada
outputs:
- name: archivos-salida-comprimidos
implementation:
  container:
    image: alpine
    command:
    - sh
    - -exc
    - |
        mkdir -p trabajo
        cd trabajo
        wget https://raw.githubusercontent.com/juacobarcelo/kubeflow-pipelines-components-and-images/main/docker/python3.10-bigquery-gcs-pandas-numpy/scripts/split-csv-into-files.sh
        chmod 755 split-csv-into-files.sh
        ./split-csv-into-files "$0" -d salida -p data_-s 7
        tar -cvzf "$1".tar.gz salida/*csv
    - inputPath: archivo-entrada
    - outputPath: archivos-salida-comprimidos
