name: Split csv file
description: Split CSV file in several files with same number of rows (except the last one)
metadata:
  annotations:
    author: Joaquín Barceló <jbarceló@solver.cl>
    canonical_location: https://raw.githubusercontent.com/juacobarcelo/kubeflow-pipelines-components-and-images/main/componentes-generales/split-csv-into-multiple-files/component.yaml
inputs:
- name: archivo-entrada
- name: number-of-lines-to-skip
  default: '0'
outputs:
- name: archivos-salida-comprimidos
implementation:
  container:
    image: alpine
    command:
    - sh
    - -exc
    - |
        apt install wget
        mkdir -p trabajo
        cd trabajo
        wget https://raw.githubusercontent.com/juacobarcelo/kubeflow-pipelines-components-and-images/main/componentes-generales/split-csv-into-multiple-files/split-csv-into-multiple-files.sh
        chmod 755 split-csv-into-files.sh
        ./split-csv-into-files "$0" -d salida -p data_-s "$1"
        tar -cvzf "$2".tar.gz salida/*csv
    - inputPath: archivo-entrada
    - inputPath: number-of-lines-to-skip
    - outputPath: archivos-salida-comprimidos
    
